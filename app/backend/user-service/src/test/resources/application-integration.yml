# application-integration.yml - 통합 테스트용 프로파일
# @ActiveProfiles("integration")을 사용하는 Spring 통합 테스트(@SpringBootTest 등)에서 사용됩니다.
# Testcontainers 또는 H2 인메모리 DB를 사용합니다.
# 주의: docker-compose.acceptance.yml과는 무관합니다.

spring:
  dotenv:
    location: file:../../../.env  # user-service 기준으로 프로젝트 루트의 .env

  datasource:
    url: jdbc:h2:mem:testdb
    driver-class-name: org.h2.Driver
    username: sa
    password:

  jpa:
    hibernate:
      ddl-auto: create-drop
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
        format_sql: true
    show-sql: true

# Test Configuration
unisync:
  encryption:
    key: IKhYmJOSJU6I9wLqNhfjr06vg6PeUsXLIRpwbcw3EF8=
  api-keys:
    canvas-sync-lambda: test-canvas-sync-key
    llm-lambda: test-llm-key

canvas:
  base-url: https://khcanvas.khu.ac.kr  # 실제 Canvas API 테스트용

# AWS Configuration (테스트용)
aws:
  region: ${AWS_REGION:ap-northeast-2}
  endpoint: ${LOCALSTACK_ENDPOINT:http://localhost:4566}
  credentials:
    access-key: ${AWS_ACCESS_KEY_ID:test}
    secret-key: ${AWS_SECRET_ACCESS_KEY:test}

  cognito:
    user-pool-id: test-pool-id
    client-id: test-client-id
    region: ap-northeast-2
    endpoint: http://localhost:4566

  sqs:
    endpoint: ${LOCALSTACK_ENDPOINT:http://localhost:4566}
    region: ${AWS_REGION:ap-northeast-2}
    queues:
      user-token-registered: ${SQS_USER_TOKEN_REGISTERED_QUEUE:user-token-registered-queue}