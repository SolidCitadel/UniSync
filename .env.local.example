# ========================================
# UniSync 로컬 개발 환경변수
# ========================================
#
# 용도:
# - IDE에서 Spring Boot를 직접 실행할 때 사용
# - Gradle bootRun/test가 이 파일을 로드하여 환경변수 주입
#
# 특징:
# - .env.common의 모든 설정 포함 (로컬 실행 시 필요)
# - 로컬 전용 오버라이드 (localhost 등)
# - 비밀 정보 (절대 커밋 금지)
#
# 사용법:
# 1. cp .env.local.example .env.local
# 2. 아래 비밀 정보를 실제 값으로 변경
# 3. docker-compose up -d 실행 (LocalStack이 Cognito 생성)
# 4. LocalStack 초기화 스크립트가 COGNITO_* 값 자동 업데이트
#
# 참고:
# - .env.local은 .gitignore에 등록됨 (절대 커밋 금지)
# - docker-compose 실행 시 이 파일의 값은 .env.common + .env.{acceptance|demo}로 덮어씌워짐
# ========================================

# ========================================
# 비밀 정보 (반드시 실제 값으로 변경)
# ========================================

# LocalStack Pro Auth Token (개인 라이선스)
LOCALSTACK_AUTH_TOKEN=your-localstack-pro-token-here

# JWT Configuration (개발용 비밀 키)
JWT_SECRET=your-secret-key-here

# Encryption Key (AES-256, Base64 encoded, 32 bytes)
# 생성: openssl rand -base64 32
ENCRYPTION_KEY=your-base64-encoded-encryption-key-here

# Canvas API Token (개인 Canvas LMS 토큰)
CANVAS_API_TOKEN=your-canvas-api-token-here

# Service API Keys (Lambda 호출용)
CANVAS_SYNC_API_KEY=your-canvas-sync-api-key-here

# ========================================
# Cognito (LocalStack 초기화 스크립트가 자동 업데이트)
# ========================================

COGNITO_USER_POOL_ID=ap-northeast-2_xxxxx
COGNITO_CLIENT_ID=xxxxx
COGNITO_REGION=ap-northeast-2

# ========================================
# 로컬 전용 오버라이드 (localhost 접속)
# ========================================

# Cognito Endpoint (로컬 LocalStack)
COGNITO_ENDPOINT=http://localhost:4566

# Service URLs (로컬 IDE 직접 실행)
USER_SERVICE_URL=http://localhost:8081
COURSE_SERVICE_URL=http://localhost:8082
SCHEDULE_SERVICE_URL=http://localhost:8083

# AWS Configuration (로컬 LocalStack)
AWS_SQS_ENDPOINT=http://localhost:4566
AWS_LAMBDA_ENDPOINT_URL=http://localhost:4566
AWS_REGION=ap-northeast-2
AWS_ACCESS_KEY_ID=test
AWS_SECRET_ACCESS_KEY=test

# Lambda Configuration
CANVAS_SYNC_LAMBDA_FUNCTION_NAME=canvas-sync-lambda
AWS_LAMBDA_CANVAS_SYNC_FUNCTION_NAME=canvas-sync-lambda

# Database Configuration (로컬 docker-compose MySQL)
USER_SERVICE_DATABASE_URL=jdbc:mysql://localhost:3307/user_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
USER_SERVICE_DB_USER=unisync
USER_SERVICE_DB_PASSWORD=unisync_password

COURSE_SERVICE_DATABASE_URL=jdbc:mysql://localhost:3307/course_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
COURSE_SERVICE_DB_USER=unisync
COURSE_SERVICE_DB_PASSWORD=unisync_password

SCHEDULE_SERVICE_DATABASE_URL=jdbc:mysql://localhost:3307/schedule_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
SCHEDULE_SERVICE_DB_USER=unisync
SCHEDULE_SERVICE_DB_PASSWORD=unisync_password

# ========================================
# 공통 설정 (.env.common과 동일, 로컬 직접 실행 시 필요)
# ========================================

# Database Names
USER_SERVICE_DB_NAME=user_db
COURSE_SERVICE_DB_NAME=course_db
SCHEDULE_SERVICE_DB_NAME=schedule_db

# SQS Queue Names (Phase 1: Manual Sync)
SQS_COURSE_ENROLLMENT_QUEUE=lambda-to-courseservice-enrollments
SQS_ASSIGNMENT_EVENTS_QUEUE=lambda-to-courseservice-assignments
SQS_ASSIGNMENT_TO_SCHEDULE_QUEUE=courseservice-to-scheduleservice-assignments
SQS_DLQ_QUEUE=dlq-queue

# SQS Queue Names (Phase 2/3: 향후 추가 예정)
# SQS_SUBMISSION_EVENTS_QUEUE=lambda-to-scheduleservice-submissions
# SQS_TASK_CREATION_QUEUE=llm-to-scheduleservice-subtasks

# S3 Bucket Names
S3_ATTACHMENTS_BUCKET=unisync-attachments
S3_LAMBDA_CODE_BUCKET=unisync-lambda-code

# Canvas Configuration (Public)
CANVAS_BASE_URL=https://khcanvas.khu.ac.kr
CANVAS_API_BASE_URL=https://khcanvas.khu.ac.kr/api/v1

# JWT Configuration
JWT_EXPIRATION=86400000
