# UniSync
E-Campus 연동 일정관리 서비스 -> 학업 생산성 증대

## 문제 정의
### 분리된 정보 관리
과제 정보는 LMS에, 일정 관리는 외부 캘린더 혹은 Todo앱에서 수행
1. LMS의 UI/UX는 불편함
2. 외부 앱은 수동 동기화 필요

### 수동 입력의 한계
1. 새로운 과제 등록을 확인하고 직접 입력
2. 번거로울 뿐더러 누락/오류 위험성

### 기존 연동 방식(iCal)의 한계
외부 캘린더로 캘린더 연동 가능
1. LMS의 일정을 단방향 동기화 -> 메모, subtask 등 불가
2. 제출/마감 이후에도 사라지지 않는 등 불편

## 핵심 기능
### Canvas LMS 자동 동기화
- Canvas API로 새로운 과제/변경사항을 자동 동기화
- 과제명, 설명, 마감일, 링크 등

### 자체적인 대시보드
- 분류, 필터링, 우선순위
- Todo, 칸반, 타임라인, 캘린더 등 다양한 시각화 도구

### AI 자동화
동기화 과정에서 자동으로 AI 분석 수행:
- 새 과제 감지 시 과제 설명 분석하여 task 및 subtask 자동 생성 및 일정 등록
- 과제 제출물 자동 검사 및 요구사항 적합성 검증 (형식, 파일명 등)
- 제출 완료 시 일정 상태를 자동으로 "제출됨"으로 변경

### 외부 서비스 연동
- Google Calendar, Todoist 등 외부 서비스와 양방향 연동

### 공강 시간 찾기
- When2Meet처럼 직접 시간대를 설정할 필요 없이, 친구들과 겹치지 않는 시간대를 자동으로 계산
- 같은 과목 수강생 간 친구 추천 기능

## 사용자 시나리오

### 1. 신규 사용자 온보딩
1. 회원가입 (이메일 또는 소셜 로그인)
2. Canvas에서 API 토큰 발급 (Settings → New Access Token)
3. UniSync 설정 페이지에서 Canvas API 토큰 입력
4. Canvas에서 수강 과목 및 과제 최초 동기화
5. 대시보드에서 동기화된 과제 및 AI로 생성된 일정 확인

### 2. Canvas 과제 자동 동기화 및 AI 분석
1. 교수가 Canvas에 새 과제 등록
2. Step Functions가 주기적으로 Canvas API 폴링하여 새 과제 감지
3. 새 과제 감지 시:
   - SQS로 이벤트 전송
   - LLM이 과제 설명 자동 분석하여 task 및 subtask 생성
   - 생성된 task들이 사용자 일정으로 자동 등록
4. Sync-Service가 과제 정보 저장 및 사용자에게 알림
5. 프론트엔드에서 실시간으로 새 과제 및 일정 표시

### 3. 과제 제출물 자동 검사
1. 학생이 Canvas에 과제 제출
2. Step Functions가 Canvas API 폴링 중 제출 감지
3. LLM이 자동으로 제출물 메타데이터 검증:
   - 파일 형식이 요구사항과 일치하는지 확인
   - 파일명이 규칙에 맞는지 확인
   - 제출물 개수가 적절한지 확인
4. 검증 결과를 사용자에게 알림:
   - 문제가 있으면 경고 메시지 표시
   - 문제 없으면 일정 상태를 "제출됨"으로 자동 변경
5. 대시보드에서 제출 완료된 과제는 자동으로 완료 처리

### 4. 외부 캘린더 연동
1. 설정 페이지에서 Google Calendar 연동
2. OAuth2 인증 후 캘린더 권한 부여
3. UniSync의 과제/일정이 Google Calendar에 자동 동기화
4. Google Calendar에서 생성한 일정도 UniSync로 동기화
5. 양방향 실시간 동기화 유지

### 5. 친구와 공강 시간대 찾기
1. Social 탭에서 친구 추가 (같은 과목 수강생 추천 목록 제공)
2. "공강 시간 찾기" 메뉴 선택
3. 참여할 친구들 선택
4. 시스템이 모든 친구의 시간표를 분석하여 겹치지 않는 시간대 표시
5. 적합한 시간대 선택 시 모든 참여자에게 일정 생성 요청

## 구현 방안
- Canvas API (Access Token 방식)
- OAuth2 (Google, Todoist 등)

### Microservices

#### Api-Gateway
AWS ACM + Cognito + ALB
- HTTPS
- JWT

#### User-Service
Spring Boot

Users, Credentials
- 회원가입 및 인증
- Canvas API 토큰 저장 (암호화)
- 외부 계정 연동 (Google, Todoist - OAuth2)
- 사용자 프로필 설정

#### Course-Service
Spring Boot

Courses, Enrollments
- 해당 학생의 수강과목 조회/저장
- 해당 과목의 수강학생 조회

#### Sync-Service
Spring Boot + SQS

Assignments, Notices, Tasks
- SQS에서 Sync-Workflow 결과 Consume
- 동기화 완료, 미동기화 상태관리
- Leader 선출(Course-Service)로 공지/과제는 과목당 한 명의 토큰으로만 조회
- 과제 제출물에 대해서 LLM API 호출

##### Sync-Workflow
AWS Step Functions + Lambda
- Canvas LMS API 폴링 (과제, 공지, 제출물)
- 새 과제 감지 시 LLM 호출하여 task 자동 생성
- 제출물 감지 시 LLM 호출하여 유효성 검사
- Todoist, Google Calendar 등 API 호출

##### LLM
Lambda
- 과제 설명 분석하여 task 및 subtask 생성
- 과제 요구사항과 제출물 메타데이터 비교 후 유효성 검사 반환

#### Schedule-Service
Spring Boot

User_Schedules
- 겹치지 않는 시간대 계산
- 카테고리/태그별 분류, 필터링
- 사용자 일정 추가/삭제

#### Social-Service
Spring Boot
Friendships
- 친구 관계 CRUD
- 친구 추천 (Course-Service)

## 기술

### 프론트엔드
- React

### 백엔드
- Spring
- Swagger
- AWS SDK
- MySQL (RDS)

### 개발 환경
- docker-compose
- LocalStack
  - ALB & Cognito
  - SQS
  - EventBridge
  - Lambda
  - RDS
  - ECS & Fargate

### 배포
- GitHub Actions
- AWS ECR

